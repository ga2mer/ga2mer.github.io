!function(e){function t(t){for(var n,r,o=t[0],s=t[1],c=t[2],d=0,p=[];d<o.length;d++)r=o[d],i[r]&&p.push(i[r][0]),i[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(h&&h(t);p.length;)p.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a,r=l[t],o=!0,s=1;s<r.length;s++)a=r[s],0!==i[a]&&(o=!1);o&&(l.splice(t--,1),e=n(n.s=r[0]))}return e}function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var r={},i={1:0},l=[];n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/assets/";var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var h=s;l.push([280,0]),a()}({118:function(e,t,a){e.exports=a.p+"ram.png"},122:function(e,t,a){e.exports=a.p+"nagisa.png"},126:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.r(t);var i=a(49),l=a.n(i),o=(a(291),a(1)),s=a.n(o),c=a(6),h=a(282),d=a(281),p=a(283),m=a(21),u=a.n(m),f=a(284),g=a(0),y=a.n(g);class v extends s.a.Component{constructor(...e){super(...e),n(this,"handleClick",({key:e})=>{this.props.history.push(e)})}render(){return s.a.createElement(u.a,{onClick:this.handleClick,theme:"dark",mode:"inline",selectedKeys:[location.pathname]},s.a.createElement(u.a.Item,{key:"/"},"Me"),s.a.createElement(u.a.Item,{key:"/cover"},"Cover"))}}n(v,"propTypes",{match:y.a.object.isRequired,location:y.a.object.isRequired,history:y.a.object.isRequired});var x=Object(f.a)(v),b=a(18),E=a.n(b),C=a(34),w=a.n(C),S=a(122),j=a.n(S),O=a(80),k=a.n(O),L=a(119),R=a.n(L),T=a(83),M=a.n(T),_=a(84),I=a.n(_),N=a(121),P=a.n(N),U=a(120);a(196);const B=I.a.Item,F='<svg xmlns="http://www.w3.org/2000/svg" width="102" height="120"> \n<path \nid="Aki-Logo" \nfill-rule="evenodd" \nfill="#fff" \nd="M1310,210L1258.75,90h-17L1293,210h17Zm-33.25-21.909-18.5,7.22-50.25-24.9,20-46.8,17.25-5.975-18.5,47.3Z" \ntransform="translate(-1208 -90)" \n/>\n</svg>';class A extends o.Component{constructor(e){super(e),r(this,"handleFile",e=>{0<e.target.files.length&&(this.setState({fileLoaded:!0}),this.props.onFile(e))}),r(this,"handleText",e=>{this.props.onText(e)}),r(this,"handleSave",()=>{this.props.onSave()}),r(this,"handleOpacityChange",e=>{this.props.onOpacityChange(e)}),this.state={fileLoaded:!1}}render(){return s.a.createElement(I.a,{className:"output form-cover"},s.a.createElement(B,null,s.a.createElement(M.a,{style:{height:"100%"},type:"file",ref:e=>e?this.file=e.refs.input:null,onChange:this.handleFile,className:"sharp",addonAfter:"Обложка"})),s.a.createElement(B,null,s.a.createElement(M.a,{type:"text",id:"name",placeholder:"Укажите тип",className:"sharp","aria-describedby":"basic-addon2",disabled:!this.state.fileLoaded,onChange:this.handleText,addonAfter:"Тип альбома"})),s.a.createElement(B,null,s.a.createElement(R.a,{defaultValue:.45,min:0,step:.01,max:1,onChange:this.handleOpacityChange})),s.a.createElement(B,null,s.a.createElement(E.a,{type:"flex",justify:"center"},s.a.createElement(k.a,{disabled:!this.state.fileLoaded,onClick:this.handleSave},"Сохранить"))))}}var q=a(118),K=a.n(q);const{Sider:z,Content:D}=l.a;Object(c.render)(s.a.createElement(h.a,null,s.a.createElement(l.a,{className:"layout-center"},s.a.createElement(z,{collapsible:!0},s.a.createElement(x,null)),s.a.createElement(l.a,null,s.a.createElement(D,null,s.a.createElement(d.a,null,s.a.createElement(p.a,{path:"/",exact:!0,component:function(){return s.a.createElement(E.a,{type:"flex",justify:"center",align:"middle",style:{minHeight:"100vh"}},s.a.createElement(w.a,null,s.a.createElement("img",{src:j.a,className:"img-fluid"}),s.a.createElement(u.a,{mode:"horizontal",className:"no-border center-horizontal",selectedKeys:[]},s.a.createElement(u.a.Item,{key:"VK"},s.a.createElement("a",{target:"_blank",href:"https://vk.com/ga2mer_o_o"},"VK")),s.a.createElement(u.a.Item,{key:"Twitter"},s.a.createElement("a",{target:"_blank",href:"https://twitter.com/ga2mer_ru"},"Twitter")))))}}),s.a.createElement(p.a,{path:"/cover",component:class extends o.Component{constructor(...e){super(...e),r(this,"x",0),r(this,"y",0),r(this,"width",0),r(this,"height",0),r(this,"text",""),r(this,"fileLoaded",!1),r(this,"blobs",[]),r(this,"opacity",.45),r(this,"initCanvas",()=>{this.ctx=this.canvas.getContext("2d")}),r(this,"initCover",()=>{this.logo=new Image;const e=new Blob([F],{type:"image/svg+xml"}),t=URL.createObjectURL(e);this.logo.onload=(()=>{this.renderCover(),URL.revokeObjectURL(t)}),this.logo.src=t}),r(this,"onCrop",e=>{this.x=e.detail.x,this.y=e.detail.y,this.width=e.detail.width,this.height=e.detail.height,this.renderCover()}),r(this,"handleFile",e=>{if(0<e.target.files.length){let t=URL.createObjectURL(e.target.files[0]);this.blobs.push(t),this.img=document.createElement("img"),this.img.onload=(()=>{this.cropper.reset().replace(t),this.fileLoaded=!0}),this.img.src=t}}),r(this,"handleText",e=>{this.text=e.target.value,this.renderCover()}),r(this,"handleSave",()=>{this.canvas.toBlob(e=>{Object(U.saveAs)(e,"cover.png")})}),r(this,"handleOpacity",e=>{this.opacity=e,this.renderCover()})}componentDidMount(){document.fonts.load('1pt "MontserratBold"').then(document.fonts.load('1pt "MontserratSemiBold"')).then(()=>{this.initCanvas(),this.initCover()})}componentWillUnmount(){this.blobs.forEach(e=>{URL.revokeObjectURL(e)})}renderCover(){this.ctx.clearRect(0,0,800,800),this.fileLoaded&&this.ctx.drawImage(this.img,this.x,this.y,this.width,this.height,0,0,800,800);var e=this.ctx.createRadialGradient(750,-100,0,750,-100,500);e.addColorStop(0,`rgb(0, 0, 0, ${this.opacity}`),e.addColorStop(1,"transparent"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,800,800),this.ctx.drawImage(this.logo,690,51,59,69);const t=document.createElement("canvas");t.width=100,t.height=200;const a=t.getContext("2d");a.clearRect(0,0,800,800),a.rotate(67*Math.PI/180),a.font="10pt MontserratSemiBold",a.fillStyle="#fff",a.letterSpacing=2.5,a.fillText("МУЗЫКА",5,0),this.ctx.drawImage(t,722,43),this.ctx.font="23pt MontserratBold",this.ctx.fillStyle="#fff",this.ctx.textAlign="right",this.ctx.fillText(this.text,663,96)}render(){return s.a.createElement(E.a,{type:"flex",justify:"center",align:"middle",style:{minHeight:"100vh"}},s.a.createElement("div",{className:"container-fluid"},s.a.createElement(E.a,{gutter:32},s.a.createElement(w.a,{span:12,className:"cover"},s.a.createElement("canvas",{ref:e=>this.canvas=e,id:"canvas",width:"800",height:"800",style:{width:500}})),s.a.createElement(w.a,{span:12},s.a.createElement(P.a,{className:"cropper",ref:e=>this.cropper=e,aspectRatio:1,dragMode:"move",viewMode:1,zoomable:!1,guides:!1,crop:this.onCrop}))),s.a.createElement(E.a,{type:"flex",justify:"center"},s.a.createElement(A,{onFile:this.handleFile,onText:this.handleText,onSave:this.handleSave,onOpacityChange:this.handleOpacity}))))}}}),s.a.createElement(p.a,{component:function(){return s.a.createElement(E.a,{type:"flex",justify:"center",align:"middle",style:{minHeight:"100vh"}},s.a.createElement("img",{src:K.a,className:"img-fluid"}))}})))))),document.querySelector("#root"))},196:function(){!function(){var e,t=[].slice;e=CanvasRenderingContext2D.prototype.fillText,CanvasRenderingContext2D.prototype.fillText=function(){var a,n,r,i,l,o=this;return r=arguments[0],i=arguments[1],l=arguments[2],a=4<=arguments.length?t.call(arguments,3):[],null==this.letterSpacing||0===this.letterSpacing?e.apply(this,arguments):(n=0,!1,r.split("").forEach(function(t){return e.apply(o,[t,i+n+o.letterSpacing,l].concat(a)),n+=o.measureText(t).width+o.letterSpacing,t}))}}()},279:function(e,t,a){a(126)},280:function(e,t,a){e.exports=a(279)},291:function(){}});