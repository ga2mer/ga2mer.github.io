webpackJsonp([0],{102:function(a,d,f){a.exports=f.p+"lossy_v2.png"},103:function(a,d,f){a.exports=f.p+"nagisa.png"},104:function(a,d,f){a.exports=f.p+"ram.png"},108:function(a,d,f){a.exports=f(41)},41:function(a,d,f){f(22).default=f(51),f(42)},42:function(a,d,f){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var k=f(86);f.n(k);var l=f(2),m=f.n(l),n=f(2);f.n(n);var o=f(37);f.n(o);var p=f(92),q=f.n(p),s=f(46),t=f(47),u=f(45),v=f(43),z=f(44);const A=q()();f.i(n.render)(m.a.createElement(o.Router,{history:A},m.a.createElement(o.Route,{component:function({children:C}){return m.a.createElement("div",{className:"app"},m.a.createElement(s.a,null)," ",C)}},m.a.createElement(o.IndexRoute,{component:t.a}),m.a.createElement(o.Route,{path:"graffiti",component:u.a}),m.a.createElement(o.Route,{path:"cover",component:v.a}),m.a.createElement(o.Route,{path:"*",component:z.a}))),document.querySelector("#root"))},43:function(a,d,f){"use strict";var k=f(2),l=f.n(k),m=f(98),n=f.n(m),o=f(88);f.n(o);var p=f(102),q=f.n(p),s=f(49);f.n(s);var t=f(50);class u extends k.Component{constructor(...z){var A;return A=super(...z),this.x=0,this.y=0,this.width=0,this.height=0,this.text="",this.fileLoaded=!1,this.initCanvas=()=>{this.ctx=this.canvas.getContext("2d")},this.initCover=()=>{this.cover=new Image,this.cover.onload=()=>{this.ctx.drawImage(this.cover,0,323,500,177),this.fileLoaded&&this.renderCover()},this.cover.src=q.a},this.onCrop=B=>{this.x=B.detail.x,this.y=B.detail.y,this.width=B.detail.width,this.height=B.detail.height,this.renderCover()},this.handleFile=B=>{if(0<B.target.files.length){let C=URL.createObjectURL(B.target.files[0]);const D=document.createElement("img");D.onload=()=>{const{width:E,height:F}=D;if(800<E&&800<F){let G;G=E>F?800/F:800/E,this.img=f.i(t.a)(D,G),this.img.toBlob(H=>{let I=URL.createObjectURL(H);this.cropper.reset().replace(I),this.fileLoaded=!0})}else this.img=D,this.cropper.reset().replace(C),this.fileLoaded=!0},D.src=C}},this.handleText=B=>{this.text=B.target.value,this.renderCover()},this.handleSave=()=>{let B=document.createElement("canvas");B.width=800,B.height=800;let C=B.getContext("2d");C.drawImage(this.img,this.x,this.y,this.width,this.height,0,0,800,800),C._blurRect(0,704,616,96,1,2),C._blurRect(671,652,129,148,1,2),C.drawImage(this.cover,0,517,800,283),C.font="42px Roboto Medium",C.fillStyle="#2d2d2d",C.fillText(this.text,34,764),B.toBlob(D=>{f.i(o.saveAs)(D,"cover.png")})},A}componentDidMount(){this.initCanvas(),this.initCover()}renderCover(){this.ctx.clearRect(0,0,500,500),this.ctx.drawImage(this.img,this.x,this.y,this.width,this.height,0,0,500,500),this.ctx._blurRect(0,439,400,61,1,2),this.ctx._blurRect(419,404,70,80,1,2),this.ctx.drawImage(this.cover,0,323,500,177),this.ctx.font="32px Roboto Medium",this.ctx.fillStyle="#2d2d2d",this.ctx.fillText(this.text,14,480)}render(){return l.a.createElement("div",{className:"vertical-center"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row around-xs"},l.a.createElement("div",{className:"col-xs"},l.a.createElement("div",{className:"cover"},l.a.createElement("canvas",{ref:z=>this.canvas=z,id:"canvas",width:"500",height:"500"}))),l.a.createElement("div",{className:"col-xs"},l.a.createElement(n.a,{className:"cropper",ref:z=>this.cropper=z,aspectRatio:1,dragMode:"move",viewMode:1,zoomable:!1,guides:!1,crop:this.onCrop}))),l.a.createElement("div",{className:"row center-text"},l.a.createElement(v,{onFile:this.handleFile,onText:this.handleText,onSave:this.handleSave}))))}}d.a=u;class v extends k.Component{constructor(z){super(z),this.handleFile=A=>{0<A.target.files.length&&(this.setState({fileLoaded:!0}),this.props.onFile(A))},this.handleText=A=>{this.props.onText(A)},this.handleSave=()=>{this.props.onSave()},this.state={fileLoaded:!1}}componentDidMount(){this.file.addEventListener("change",this.handleFile)}render(){return l.a.createElement("div",{className:"output"},l.a.createElement("div",{className:"form-control"},l.a.createElement("input",{type:"file",id:"file",className:"field","aria-describedby":"basic-addon2",ref:z=>this.file=z}),l.a.createElement("span",{className:"item",id:"basic-addon2"},"\u041E\u0431\u043B\u043E\u0436\u043A\u0430")),l.a.createElement("div",{className:"form-control"},l.a.createElement("input",{type:"text",id:"name",placeholder:"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0442\u0438\u043F",className:"field","aria-describedby":"basic-addon2",disabled:!this.state.fileLoaded,onChange:this.handleText}),l.a.createElement("span",{className:"item",id:"basic-addon2"},"\u0422\u0438\u043F \u0430\u043B\u044C\u0431\u043E\u043C\u0430")),l.a.createElement("button",{type:"button",className:"btn",disabled:!this.state.fileLoaded,onClick:this.handleSave},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"))}}},44:function(a,d,f){"use strict";var k=f(2),l=f.n(k),m=f(104),n=f.n(m);d.a=function(){return l.a.createElement("div",{className:"container center-text",style:{maxWidth:"450px"}},l.a.createElement("img",{src:n.a,className:"img-fluid"}))}},45:function(a,d,f){"use strict";var k=f(22),l=f.n(k),m=f(2),n=f.n(m),o=f(23),p=f.n(o),q=f(87),s=f.n(q),t=f(48);class u extends m.Component{constructor(v){super(v),this.parseJSON=z=>z.json(),this.handleChangeToken=z=>{this.setState({token:z.target.value,tokenValid:/access_token=(.+)&expires_in/.test(z.target.value)})},this.handleURL=z=>{this.setState({url:z.target.value})},this.setInfo=(z,A)=>{this.setState({info:{type:z,message:A}})},this.handleLink=()=>{this.setInfo("","");const z=this.state.token,A=this.file;if(0==A.files.length&&0==this.state.url.length)return this.setInfo("error","\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D \u0444\u0430\u0439\u043B \u0438\u043B\u0438 \u043D\u0435 \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u043E \u043F\u043E\u043B\u0435 \u044E\u0440\u043B"),!1;const[,B]=/access_token=(.+)&expires_in/.exec(z);var C=new FormData;C.append("file",A.files[0]);var D=/pu\.vk\.com\/c(\d+)\/upload\.php\?act=add_doc&mid=(\d+)&aid=0&gid=0&type=graffiti&hash=([a-z0-9]+)&rhash=([a-z0-9]+)&api=1/i,E=/cs(\d+)\.vk\.com\/upload\.php\?act=add_doc&mid=(\d+)&aid=0&gid=0&type=graffiti&hash=([a-z0-9]+)&rhash=([a-z0-9]+)/i;this.setInfo("message","\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F, \u043F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435"),s()(`https://api.vk.com/method/docs.getUploadServer?v=5.54&access_token=${B}&type=graffiti`).then(this.checkStatusP).then(this.parseJSON).then(F=>{var G=D.test(F.response.upload_url),[,H,I,J,K]=(G&&D||E).exec(F.response.upload_url);if(0<A.files.length)return fetch(`https://akg.moe/vkgraffiti/upload_by_file?c=${H}&mid=${I}&hash=${J}&rhash=${K}`,{method:"POST",body:C}).then(this.checkStatus).then(this.parseJSON);return this.state.url?fetch(`https://akg.moe/vkgraffiti/upload_by_url?url=${this.state.url}&c=${H}&mid=${I}&hash=${J}&rhash=${K}`,{method:"POST"}).then(this.checkStatus).then(this.parseJSON):void 0}).then(F=>s()(`https://api.vk.com/method/docs.save?v=5.54&access_token=${B}&file=${F.file}`).then(this.parseJSON)).then(F=>{var G=F.response[0],H=`https://vk.com/doc${G.owner_id}_${G.id}`;this.setInfo("link",H)}).catch(F=>{return F instanceof t.a?this.setInfo("error",F.message):void this.setInfo("error",F.message)})},this.handleClearFile=()=>{this.file.value=""},this.handleCopyLink=()=>{this.linkInput.select(),document.execCommand("Copy")},this.state={token:"",tokenValid:!1,url:"",info:{type:"",message:""}}}checkStatus(v){return 200<=v.status&&300>v.status?v:v.json().then(z=>{var A;if(z.message)A="File too large"==z.message&&"\u0420\u0430\u0437\u043C\u0435\u0440 \u0444\u0430\u0439\u043B\u0430 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0435\u0442 4\u043C\u0431"||z.message;else if(z.error&&z.error.error_code)return l.a.reject(new t.a(z.error.error_msg,z.error.error_code));return l.a.reject(new Error(A))})}checkStatusP(v){return v.json().then(z=>{if(z.response)return v;return z.error&&z.error.error_code?l.a.reject(new t.a(z.error.error_msg,z.error.error_code)):z.error?l.a.reject(new Error(z.error.error_msg)):void 0})}handleGetToken(){window.open("https://oauth.vk.com/authorize?client_id=5553668&scope=docs&response_type=token")}handleSelectAll(v){v.target.setSelectionRange(0,v.target.value.length)}render(){return n.a.createElement("div",{className:"vertical-center center-text"},n.a.createElement("div",{style:{maxWidth:"450px"}},"\u0417\u0434\u0435\u0441\u044C \u043A\u043E\u0433\u0434\u0430-\u043D\u0438\u0431\u0443\u0434\u044C \u0431\u0443\u0434\u0435\u0442 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",n.a.createElement("form",null,n.a.createElement("label",{htmlFor:"token"},"\u0410\u0434\u0440\u0435\u0441 \u0441 access_token"),n.a.createElement("div",{className:"form-control"},n.a.createElement("input",{id:"token",type:"text",className:"field",value:this.state.token,onChange:this.handleChangeToken,placeholder:"https://oauth.vk.com/blank..."}),n.a.createElement("button",{className:"item primary",type:"button",onClick:this.handleGetToken},"\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C")),n.a.createElement("label",{htmlFor:"file"},"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435: png, jpg \u0438\u043B\u0438 gif"),n.a.createElement("div",{className:"form-control"},n.a.createElement("input",{id:"file",className:"field",disabled:!this.state.tokenValid||0<this.state.url.length,ref:v=>this.file=v,type:"file"}),n.a.createElement("button",{className:"item primary",type:"button",disabled:!this.state.tokenValid||0<this.state.url.length,onClick:this.handleClearFile},"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C")),n.a.createElement("div",{className:"strike"},n.a.createElement("span",null,"\u0438\u043B\u0438 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435")),n.a.createElement("div",{className:"form-control"},n.a.createElement("input",{className:"field sharp",disabled:!this.state.tokenValid,type:"text",value:this.state.url,onChange:this.handleURL,placeholder:"e.g. http://i.imgur.com/cPuty2U.png"})),n.a.createElement("div",{className:"divider"}),n.a.createElement("button",{className:"btn secondary",type:"button",disabled:!this.state.tokenValid,onClick:this.handleLink},"\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443"),this.state.info.type&&n.a.createElement("div",{className:"divider"}),this.state.info.type&&n.a.createElement("div",{className:p()({alert:!0,"alert-danger":"error"==this.state.info.type,"alert-info":"message"==this.state.info.type,"alert-success":"link"==this.state.info.type}),role:"alert"},(()=>{return"link"==this.state.info.type?n.a.createElement("div",{className:"form-control"},n.a.createElement("input",{type:"text",ref:v=>this.linkInput=v,className:"field sharp",readOnly:!0,onClick:this.handleSelectAll,defaultValue:this.state.info.message}),n.a.createElement("button",{className:"item primary",type:"button",onClick:this.handleCopyLink},"\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C")):this.state.info.message})()))))}}d.a=u},46:function(a,d,f){"use strict";var k=f(2),l=f.n(k),m=f(37);f.n(m);var n=f(23),o=f.n(n);d.a=function(){return l.a.createElement("header",{style:{background:"white"}},l.a.createElement("ul",{className:"navigation"},l.a.createElement("li",{className:o()({active:"/"==location.pathname})},l.a.createElement(m.Link,{to:"/"},"Me")),l.a.createElement("li",{className:o()({active:"/graffiti"==location.pathname})},l.a.createElement(m.Link,{to:"/graffiti"},"Graffiti")),l.a.createElement("li",{className:o()({active:"/cover"==location.pathname})},l.a.createElement(m.Link,{to:"/cover"},"Cover"))))}},47:function(a,d,f){"use strict";var k=f(2),l=f.n(k),m=f(103),n=f.n(m);d.a=function(){return l.a.createElement("div",{className:"vertical-center"},l.a.createElement("div",{className:"container center-text"},l.a.createElement("img",{src:n.a,className:"img-fluid"}),l.a.createElement("ul",{className:"links"},l.a.createElement("li",null,l.a.createElement("a",{href:"https://vk.com/ga2mer_o_o"},"VK")),l.a.createElement("li",null,l.a.createElement("a",{href:"https://twitter.com/ga2mer_ru"},"Twitter")))))}},48:function(a,d){"use strict";class f extends Error{constructor(k,l){super(),this.name="VKError",this.message=k,this.error_code=l,this.stack=new Error().stack}}d.a=f},49:function(){!function(a){"use strict";function d(q,s,t,u){var v,z,A,B,C=0.3086*(1-u),D=0.6094*(1-u),E=0.082*(1-u),F,G,H;for(A=0;A<t;A++)for(B=A*(s<<2),z=0;z<s;z++)v=B+(z<<2),F=q[v],G=q[v+1],H=q[v+2],q[v]=(C+u)*F+D*G+E*H,q[v+1]=C*F+(D+u)*G+E*H,q[v+2]=C*F+D*G+(E+u)*H}function f(q,s,t,u,v){var z=new Uint8Array(4*(s*t));k(q,z,s,t,u),m(z,q,s,t,u),l(q,z,s,t,u),n(z,q,s,t,u),v!==void 0&&1!==v&&d(q,s,t,v)}function k(q,s,t,u,v){var z,A,B,C,D,E,F,G,H;for(A=0;A<u;A++){for(E=0,F=0,G=0,H=0,B=A*(t<<2),z=0;z<v;z++)C=B+(z<<2),E+=q[C],F+=q[C+1],G+=q[C+2],H+=q[C+3],s[C]=0|E/(z+1),s[C+1]=0|F/(z+1),s[C+2]=0|G/(z+1),s[C+3]=0|H/(z+1);for(;z<t;z++)C=B+(z<<2),D=C-(v<<2),s[C]=0|E/v,s[C+1]=0|F/v,s[C+2]=0|G/v,s[C+3]=0|H/v,E+=q[C]-q[D],F+=q[C+1]-q[D+1],G+=q[C+2]-q[D+2],H+=q[C+3]-q[D+3]}}function l(q,s,t,u,v){var z,A,B,C,D,E,F,G,H;for(A=0;A<u;A++){for(E=0,F=0,G=0,H=0,B=A*(t<<2),z=t-1;z>=t-v;z--)C=B+(z<<2),E+=q[C],F+=q[C+1],G+=q[C+2],H+=q[C+3],s[C]=0|E/(t-z),s[C+1]=0|F/(t-z),s[C+2]=0|G/(t-z),s[C+3]=0|H/(t-z);for(;0<=z;z--)C=B+(z<<2),D=C+(v<<2),s[C]=0|E/v,s[C+1]=0|F/v,s[C+2]=0|G/v,s[C+3]=0|H/v,E+=q[C]-q[D],F+=q[C+1]-q[D+1],G+=q[C+2]-q[D+2],H+=q[C+3]-q[D+3]}}function m(q,s,t,u,v){var z,A,B,C,D,E=t<<2,F,G,H,I;for(z=0;z<t;z++){for(F=0,G=0,H=0,I=0,B=z<<2,A=0;A<v;A++)C=B+A*E,F+=q[C],G+=q[C+1],H+=q[C+2],I+=q[C+3],s[C]=0|F/(A+1),s[C+1]=0|G/(A+1),s[C+2]=0|H/(A+1),s[C+3]=0|I/(A+1);for(;A<u;A++)C=B+A*E,D=C-E*v,s[C]=0|F/v,s[C+1]=0|G/v,s[C+2]=0|H/v,s[C+3]=0|I/v,F+=q[C]-q[D],G+=q[C+1]-q[D+1],H+=q[C+2]-q[D+2],I+=q[C+3]-q[D+3]}}function n(q,s,t,u,v){var z,A,B,C,D,E=t<<2,F,G,H,I;for(z=0;z<t;z++){for(F=0,G=0,H=0,I=0,B=z<<2,A=u-1;A>=u-v;A--)C=B+A*E,F+=q[C],G+=q[C+1],H+=q[C+2],I+=q[C+3],s[C]=0|F/(u-A),s[C+1]=0|G/(u-A),s[C+2]=0|H/(u-A),s[C+3]=0|I/(u-A);for(;0<=A;A--)C=B+A*E,D=C+E*v,s[C]=0|F/v,s[C+1]=0|G/v,s[C+2]=0|H/v,s[C+3]=0|I/v,F+=q[C]-q[D],G+=q[C+1]-q[D+1],H+=q[C+2]-q[D+2],I+=q[C+3]-q[D+3]}}var o=document.createElement("canvas");o.width=screen.width,o.height=screen.height;var p=o.getContext("2d");a.CanvasRenderingContext2D.prototype._blurRect=function(s,t,u,v,z,A){var B=this,C=B.canvas,D=0|u,E=0|v,F=0|s,G=0|t;z=32*(0|z),z=Math.min(Math.max(z,32),256);var H=Math.max(0,0|Math.log(z)/Math.log(2)-3),I=z>>>H,J=C.width>>>H,K=C.height>>>H;p.drawImage(C,0,0,J,K);var L=p.getImageData(0,0,J,K);return f(L.data,J,K,I,A),p.putImageData(L,0,0),p.drawImage(o,0,0,J,K,0,0,C.width,C.height),B.drawImage(o,F,G,D,E,F,G,D,E),B}}(window)},50:function(a,d){"use strict";function f(k,l){if(!(1>l)||!(0<l))throw"scale must be a positive number <1 ";var m=l*l,n=k.width,o=k.height,p=Math.floor(n*l),q=Math.floor(o*l),s=0,t=0,u=0,v=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=!1,L=!1,M=k.getContext("2d").getImageData(0,0,n,o).data,N=new Float32Array(3*p*q),O=0,P=0,Q=0;for(t=0;t<o;t++)for(z=t*l,D=0|z,A=3*D*p,L=D!=(0|z+l),L&&(I=D+1-z,J=z+l-D-1),s=0;s<n;s++,u+=4)v=s*l,C=0|v,B=A+3*C,K=C!=(0|v+l),K&&(G=C+1-v,H=v+l-C-1),O=M[u],P=M[u+1],Q=M[u+2],K||L?K&&!L?(E=G*l,N[B]+=O*E,N[B+1]+=P*E,N[B+2]+=Q*E,F=H*l,N[B+3]+=O*F,N[B+4]+=P*F,N[B+5]+=Q*F):L&&!K?(E=I*l,N[B]+=O*E,N[B+1]+=P*E,N[B+2]+=Q*E,F=J*l,N[B+3*p]+=O*F,N[B+3*p+1]+=P*F,N[B+3*p+2]+=Q*F):(E=G*I,N[B]+=O*E,N[B+1]+=P*E,N[B+2]+=Q*E,F=H*I,N[B+3]+=O*F,N[B+4]+=P*F,N[B+5]+=Q*F,F=G*J,N[B+3*p]+=O*F,N[B+3*p+1]+=P*F,N[B+3*p+2]+=Q*F,F=H*J,N[B+3*p+3]+=O*F,N[B+3*p+4]+=P*F,N[B+3*p+5]+=Q*F):(N[B]+=O*m,N[B+1]+=P*m,N[B+2]+=Q*m);var R=document.createElement("canvas");R.width=p,R.height=q;var S=R.getContext("2d"),T=S.getImageData(0,0,p,q),U=T.data,V=0;for(u=0,B=0;V<p*q;u+=3,B+=4,V++)U[B]=Math.ceil(N[u]),U[B+1]=Math.ceil(N[u+1]),U[B+2]=Math.ceil(N[u+2]),U[B+3]=255;return S.putImageData(T,0,0),R}d.a=function(l,m){var n=document.createElement("canvas");n.width=l.width,n.height=l.height;var o=n.getContext("2d");return o.drawImage(l,0,0),f(n,m)}},86:function(){}},[108]);