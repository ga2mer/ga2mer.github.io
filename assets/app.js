webpackJsonp([0],{46:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _classCallCheck2=__webpack_require__(11),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=__webpack_require__(13),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(12),_inherits3=_interopRequireDefault(_inherits2);__webpack_require__(86);var _react=__webpack_require__(10),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(10),_reactDom2=_interopRequireDefault(_reactDom),_preactRouter=__webpack_require__(88),_preactRouter2=_interopRequireDefault(_preactRouter),_header=__webpack_require__(48),_header2=_interopRequireDefault(_header),_home=__webpack_require__(49),_home2=_interopRequireDefault(_home),_graffiti=__webpack_require__(47),_graffiti2=_interopRequireDefault(_graffiti),App=function(_React$Component){function App(){return(0,_classCallCheck3["default"])(this,App),(0,_possibleConstructorReturn3["default"])(this,_React$Component.apply(this,arguments))}return(0,_inherits3["default"])(App,_React$Component),App.prototype.render=function(props,state){return _react2["default"].createElement("div",{"class":"app"},_react2["default"].createElement(_header2["default"],null),_react2["default"].createElement(_preactRouter2["default"],null,_react2["default"].createElement(_home2["default"],{path:"/"}),_react2["default"].createElement(_graffiti2["default"],{path:"/graffiti"}),_react2["default"].createElement(Error,{type:"404","default":!0})))},App}(_react2["default"].Component);_reactDom2["default"].render(_react2["default"].createElement(App,null),document.querySelector("#root"))},47:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _classCallCheck2=__webpack_require__(11),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=__webpack_require__(13),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(12),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(10),_react2=_interopRequireDefault(_react),_fetchJsonp=__webpack_require__(87),_fetchJsonp2=_interopRequireDefault(_fetchJsonp),Graffiti=function(_Component){function Graffiti(){(0,_classCallCheck3["default"])(this,Graffiti);var _this=(0,_possibleConstructorReturn3["default"])(this,_Component.call(this));return _this.state={token:""},_this.handleToken=_this.handleToken.bind(_this),_this.handleLink=_this.handleLink.bind(_this),_this}return(0,_inherits3["default"])(Graffiti,_Component),Graffiti.prototype.parseJSON=function(response){return response.json()},Graffiti.prototype.handleGetToken=function(){window.open("https://oauth.vk.com/authorize?client_id=5553668&scope=docs&response_type=token")},Graffiti.prototype.handleToken=function(e){this.setState({token:e.target.value})},Graffiti.prototype.handleLink=function(){var _this2=this,tokenEl=this.state.token,fileEl=this.refs.file,_$exec=/access_token=(.+)&expires_in/.exec(tokenEl),token=_$exec[1],fd=new FormData;fd.append("file",fileEl.files[0]),(0,_fetchJsonp2["default"])("https://api.vk.com/method/docs.getUploadServer?v=5.54&access_token="+token+"&type=graffiti").then(this.parseJSON).then(function(uploadServer){return _this2.refs.link.innerHTML="Загрузка изображения долгая, подождите",fetch("https://cors-anywhere.herokuapp.com/"+uploadServer.response.upload_url+"&type=graffiti",{method:"POST",body:fd}).then(_this2.parseJSON)}).then(function(responseFile){return(0,_fetchJsonp2["default"])("https://api.vk.com/method/docs.save?v=5.54&access_token="+token+"&file="+responseFile.file).then(_this2.parseJSON)}).then(function(responseDoc){var doc=responseDoc.response[0],link="https://vk.com/doc"+doc.owner_id+"_"+doc.id;_this2.refs.link.innerHTML='<a href="'+link+'">'+link+"</a>"})},Graffiti.prototype.render=function(props,state){return _react2["default"].createElement("div",{id:"graffiti"},_react2["default"].createElement("button",{onClick:this.handleGetToken},"Получить токен"),_react2["default"].createElement("div",null,"Вставьте полностью весь юрл"),_react2["default"].createElement("input",{type:"text",id:"token",value:state.token,onKeyUp:this.handleToken}),_react2["default"].createElement("div",null,"Укажите .png"),_react2["default"].createElement("input",{ref:"file",type:"file"}),_react2["default"].createElement("div",null,_react2["default"].createElement("button",{onClick:this.handleLink},"Получить ссылку")),_react2["default"].createElement("div",{ref:"link"},state.message))},Graffiti}(_react.Component);exports["default"]=Graffiti},48:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _classCallCheck2=__webpack_require__(11),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=__webpack_require__(13),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(12),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(10),_react2=_interopRequireDefault(_react),Header=function(_Component){function Header(){return(0,_classCallCheck3["default"])(this,Header),(0,_possibleConstructorReturn3["default"])(this,_Component.apply(this,arguments))}return(0,_inherits3["default"])(Header,_Component),Header.prototype.render=function(props,state){return _react2["default"].createElement("div",{id:"header"},_react2["default"].createElement("ul",null,_react2["default"].createElement("li",null,_react2["default"].createElement("a",{href:"/"},"Main")),_react2["default"].createElement("li",null,_react2["default"].createElement("a",{href:"/graffiti"},"Graffiti"))))},Header}(_react.Component);exports["default"]=Header},49:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _classCallCheck2=__webpack_require__(11),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=__webpack_require__(13),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(12),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(10),_react2=_interopRequireDefault(_react),Nagisa=__webpack_require__(90),Home=function(_Component){function Home(){return(0,_classCallCheck3["default"])(this,Home),(0,_possibleConstructorReturn3["default"])(this,_Component.apply(this,arguments))}return(0,_inherits3["default"])(Home,_Component),Home.prototype.render=function(props,state){return _react2["default"].createElement("div",{id:"home"},_react2["default"].createElement("img",{src:Nagisa}),_react2["default"].createElement("ul",null,_react2["default"].createElement("li",null,_react2["default"].createElement("a",{href:"https://vk.com/ga2mer_o_o"},"VK")),_react2["default"].createElement("li",null,_react2["default"].createElement("a",{href:"https://twitter.com/ga2mer_ru"},"Twitter"))))},Home}(_react.Component);exports["default"]=Home},86:function(module,exports){},90:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"601aa39318bb5d828cac1b4bdc49f6f1.png"},91:function(module,exports,__webpack_require__){module.exports=__webpack_require__(46)}},[91]);